# 第10章 内部类

- [第10章 内部类](#第10章-内部类)
  - [10.1 创建内部类](#101-创建内部类)
  - [10.2 链接到外部类](#102-链接到外部类)
  - [10.3 使用.this与.new](#103-使用this与new)
  - [10.4 内部类与向上转型](#104-内部类与向上转型)
  - [10.5 在方法和作用域内到内部类](#105-在方法和作用域内到内部类)
  - [10.6 匿名内部类](#106-匿名内部类)
    - [10.61 再访工厂方法](#1061-再访工厂方法)
  - [10.7 嵌套类](#107-嵌套类)
    - [10.7.1 接口内部的类](#1071-接口内部的类)
    - [17.7.2 从多层嵌套类中访问外部类的成员](#1772-从多层嵌套类中访问外部类的成员)
  - [10.8 为什么需要内部类](#108-为什么需要内部类)
    - [10.8.1 闭包与回调](#1081-闭包与回调)
    - [10.8.2 内部类与控制框架](#1082-内部类与控制框架)
  - [10.9 内部类的继承](#109-内部类的继承)
  - [10.10 内部类可以被覆盖吗](#1010-内部类可以被覆盖吗)
  - [10.11 局部内部类](#1011-局部内部类)
  - [10.12 内部类标识符](#1012-内部类标识符)
  - [10.13 总结](#1013-总结)

> 可以将一个类的定义放在另一个类的定义内部，这就是内部类。
>
> 内部类是一种非常有用的特性，因为它允许你把一下逻辑相关的类组织在一起，并控制位于内部的类的可见性。然而必需要了解，内部类与组合是完全不同的概念，这一点很重要。
> 
> 在最初，内部类看起来就像是一种代码隐藏机制：将类置于其他类的内部。但是，你将会了解到，内部类远不止如此，它了解外围类，并能与之通信；而且你用内部类写出的代码更加优雅而清晰，尽管并不总是这样。

## 10.1 创建内部类

创建内部类的方式就如同你想的一样 —— 把类的定义置于外围类的里面：

``` java
public class Parcel1 { // 包裹
    class Contents { // 内容
        private int i = 11;
        public int value() { return i; }
    }

    class Destination { // 目的地
        private String label;
        public Destination(String label) { this.label = label; }

        String readLabel() { return label; }
    }

    public void ship(String dest) { // 运送
        Contents c = new Contents();
        Destination d = new Destination(dest);
        System.out.println(d.readLabel());
    }

    public static void main(String[] args) {
        Parcel1 p = new Parcel1();
        p.ship("Tasmania");
    }
}
```

当我们在`ship()`方法里面使用内部类的时候，与使用普通类没什么不同。在这里，实际的区别只是内部类的名字是嵌套在`Parcel1`里面的。

如果想从外部类的非静态方法之外的任意位置创建某个内部类的对象，那么必须像在`main()`方法中那样，具体地指明这个对象的类型：***OuterClassName.InnerClassName*** 。 如下例：

``` java
public class Parcel2 {
    class Contents { // 内容
        private int i = 11;
        public int value() { return i; }
    }

    class Destination { // 目的地
        private String label;
        public Destination(String label) { this.label = label; }
        String readLabel() { return label; }
    }

    public Destination to(String s) {
        return new Destination(s);
    }

    public Contents contents() {
        return new Contents();
    }

    public void ship(String dest) {
        Contents c = contents();
        Destination d = to(dest);
        System.out.println(d.readLabel());
    }

    public static void main(String[] args) {
        Parcel2 p = new Parcel2();
        p.ship("Tasmania");
        // Defining references to inner classes;
        Parcel2 q = new Parcel2();
        Parcel2.Contents c = q.contents();
        Parcel2.Destination d = q.to("Borneo");
    }
}
```

## 10.2 链接到外部类

## 10.3 使用.this与.new

## 10.4 内部类与向上转型

## 10.5 在方法和作用域内到内部类

## 10.6 匿名内部类

### 10.61 再访工厂方法

## 10.7 嵌套类

### 10.7.1 接口内部的类

### 17.7.2 从多层嵌套类中访问外部类的成员

## 10.8 为什么需要内部类

### 10.8.1 闭包与回调

### 10.8.2 内部类与控制框架

## 10.9 内部类的继承

## 10.10 内部类可以被覆盖吗

## 10.11 局部内部类

## 10.12 内部类标识符

## 10.13 总结